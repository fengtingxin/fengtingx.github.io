---
title: 1358.包含所有三种字符的子字符串数目
date: 2024-10-14 22:09:47
categories:
  - 算法
tags:
  - 算法
  - 定长滑动窗口专题
  - 求子数组个数
---

给你一个字符串 `s` ，它只包含三种字符 a, b 和 c 。

请你返回 a，b 和 c 都 **至少** 出现过一次的子字符串数目。

 

**示例 1：**

```
输入：s = "abcabc"
输出：10
解释：包含 a，b 和 c 各至少一次的子字符串为 "abc", "abca", "abcab", "abcabc", "bca", "bcab", "bcabc", "cab", "cabc" 和 "abc" (相同字符串算多次)。
```

**示例 2：**

```
输入：s = "aaacb"
输出：3
解释：包含 a，b 和 c 各至少一次的子字符串为 "aaacb", "aacb" 和 "acb" 。
```

**示例 3：**

```
输入：s = "abc"
输出：1
```

 

**提示：**

- `3 <= s.length <= 5 x 10^4`
- `s` 只包含字符 a，b 和 c 。



解题：**一般要写 `ans += left`。**



```java
class Solution {
    public int numberOfSubstrings(String s) {
        //思路：
        //right 先从0开始，执行下,判断是否包含a\b\c
        int arr[] = new int [3];
        int result = 0;

        int left = 0;

        for(int right = 0; right< s.length() ; right++){
            arr[s.charAt(right) - 'a'] ++;
            while(isOk(arr)){
                //减去最左边那个字符
                arr[s.charAt(left) - 'a'] --;
                //移动左指针
                left++;
            }
            //这一点比较关键：如果前面发现ok了，则left才会++；否则left就一直为0；
            //如果 发现isOk，left++ 则认为 left 到 right 可以满足存在a\b\c
            result += left;
        }
        return result;
    }


    private boolean isOk(int arr[]){
        return arr[0] >=1 && arr[1] >= 1 && arr[2] >= 1;
    }
}
```

