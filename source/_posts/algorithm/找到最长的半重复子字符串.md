---
title: 2730.找到最长的半重复子字符串
date: 2024-09-10 23:44:34
categories:
  - 算法
tags:
  - 算法
  - 不定长滑动窗口专题
---

给你一个下标从 **0** 开始的字符串 `s` ，这个字符串只包含 `0` 到 `9` 的数字字符。

如果一个字符串 `t` 中至多有一对相邻字符是相等的，那么称这个字符串 `t` 是 **半重复的** 。例如，`"0010"` 、`"002020"` 、`"0123"` 、`"2002"` 和 `"54944"` 是半重复字符串，而 `"00101022"` （相邻的相同数字对是 00 和 22）和 `"1101234883"` （相邻的相同数字对是 11 和 88）不是半重复字符串。

请你返回 `s` 中最长 **半重复** 

子字符串

 的长度。



 

**示例 1：**

**输入：**s = "52233"

**输出：**4

**解释：**

最长的半重复子字符串是 "5223"。整个字符串 "52233" 有两个相邻的相同数字对 22 和 33，但最多只能选取一个。

**示例 2：**

**输入：**s = "5494"

**输出：**4

**解释：**

`s` 是一个半重复字符串。

**示例 3：**

**输入：**s = "1111111"

**输出：**2

**解释：**

最长的半重复子字符串是 "11"。子字符串 "111" 有两个相邻的相同数字对，但最多允许选取一个。

 

**提示：**

- `1 <= s.length <= 50`
- `'0' <= s[i] <= '9'`

```java
class Solution {

    
    public int longestSemiRepetitiveSubstring(String s) {
// 本题最难的点在于理解题意：即：什么是半重复字符串？
// 白话描述一下：在一个字符串中有0个或者1个长度为2且字符相同的字符串. 例如 0010是半重复字符串
// 001 是半重复字符串
// 0001 就不是半重复字符串
        int l = 0, r = 1;
        int length = s.length();
        if(length < 2){
            return length;
        }

        //注意相邻的字符串，最多只能有两个.
        int tempLength = 0;

        int result = tempLength;

        int repeatIndex = -1; //重复的开始index

        //记录下来:
        while(r < length && r >= l){
            //System.out.println("repeatIndex = " + repeatIndex + "; r = " + r +"; l = " + l + "; result = " + result);
            //不校验第一个
            if(r != 0){
                //当相邻的两个字符相同时，则认为已经发现了重复的字符
                if(s.charAt(r) == s.charAt(r-1)){
                    //如果有重复的索引，代表在当前索引之前已有重复的字符串.
                    if(repeatIndex >= 0){
                        //把l指针的位置挪到重复的字符串索引的下一个，即重复字符的末尾
                        l = repeatIndex+1;
                    }
                    // 重复索引挪到当前位置减一.
                    repeatIndex = r-1;
                }
            }
            tempLength = r - l + 1;
            r++;
            result = Math.max(result,tempLength);
        }
        return result;
    }
}

```

